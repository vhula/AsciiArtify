# Вступ

Відповідно до рішення команди продукт AsciiArtify буде розгортатися та масштабуватися в Kubernetes кластері. Необхідно визначити, який інструмент може використовуватися для локальної розробки продукту.

Метою аналізу є визначення характеристик запропонованих інструментів та їх порівняльний аналіз. На базі проведеного порівняння команд прийме рішення, який інструмент найкраще підходить для потреб розробників.

Розглянемо інструменти для розгортання Kubernetes кластеру в локальному середовищі. А саме [minikube](https://minikube.sigs.k8s.io/docs/), [kind](https://kind.sigs.k8s.io/) та [k3d](https://k3d.io/v5.5.1/).

# Характеристики

## minikube

Проект [minikube](https://minikube.sigs.k8s.io/docs/) ставить собі за мету полегшити розробникам додатків та новим користувачам Kubernetes перший досвід із кластером. 

Розгортання кластеру виконується за допомоги команди ```minikube start```. Після завершення команди кластер та середовище готові до використання ```kubectl```. Тобто користувачу немає потреби налаштовувати конфігурацію для інструменту ```kubectl```. Зупинка кластеру також є дуже простою і виконується за допомоги команди ```minikube stop```.

[minikube](https://minikube.sigs.k8s.io/docs/) підтримує основні операційні системи(Windows, Linux, macOS) та архітектури.

Перевагою [minikube](https://minikube.sigs.k8s.io/docs/) є те, що він підтримує останні версії Kubernetes. 

[minikube](https://minikube.sigs.k8s.io/docs/) можна розгорнути в віртуальній машині, контейнері чи на залізі (bare-metal). Крім того він підтримує такі середовища контейнерів: docker, containerd та CRI-O.

[minikube](https://minikube.sigs.k8s.io/docs/) підтримує складний функціонал Kubernetes, зокрема LoadBalancer, filesystem mounts, FeatureGates і network policy.

Для локального розгортання [minikube](https://minikube.sigs.k8s.io/docs/) необхідно мінімум 2 ядра CPU, 2GB вільної оперативної пам'яті і 20 GB вільного дискового простору. Крім того необхідно встановити менеджер контейнерів або віртульних машин: Docker, QEMU, Hyperkit, Hyper-V, KVM, Parallels, Podman, VirtualBox або VMware Fusion/Workstation.

## kind

Першопочатковим призначенням [kind](https://kind.sigs.k8s.io/) було тестування kubernetes, але тепер його можна використовувати і для локальної розробки чи CI.

Кластер розгортається за допомоги команди ```kind create cluster```. Після завершення команди кластер та середовище готові до використання ```kubectl```. Зупинка кластеру виконоється командою ```kind delete cluster```.

[kind](https://kind.sigs.k8s.io/) підтримує основні операційні системи(Windows, Linux, macOS) та архітектури.

[kind](https://kind.sigs.k8s.io/) розгортається в контейнерах і тому це відбувається дуже швидко.

Для локального розгортання [kind](https://kind.sigs.k8s.io/) рекомендується мінімум 8GB вільної оперативної пам'яті та мінімум 2 ядра CPU.

Необхідно встановити Docker Desktop для локального тестування з використанням операційної системи Windows, що може мати негативні наслідки в майбутньому у зв'язку з ліцензійними обмеженнями Docker Desktop.

## k3d

Проект [k3d](https://k3d.io/v5.5.1/) є обгорткою і побудований на базі [k3s](https://docs.k3s.io/) (оптимізованого k8s кластера).

Розгортання кластеру виконується за допомоги команди ```k3d cluster create <cluster name>```. Після завершення команди кластер та середовище готові до використання ```kubectl```. Зупинка кластеру також є дуже простою і виконується за допомоги команди ```k3d cluster delete <cluster name>```.

[k3d](https://k3d.io/v5.5.1/) підтримує основні операційні системи(Windows, Linux, macOS) та архітектури.

Перевагою [k3d](https://k3d.io/v5.5.1/) є те, що він складається з одного двійкового файлу та за лічені секунди розгортає кластер.

Для локального розгортання [kind](https://kind.sigs.k8s.io/) рекомендується мінімум 512MB вільної оперативної пам'яті та мінімум 1 ядро CPU.

# Демонстрація

## minikube

![Image](../res/minikube-demo.gif)

## kind

![Image](../res/kind-demo.gif)

## k3d

![Image](../res/k3d-demo.gif)

# Висновки

Завдяки проведеному аналізу стає очевидним, що найкращим кандидатом для локального тестування є інструмент [k3d](https://k3d.io/v5.5.1/) оскільки він потребує мінімум ресурсів та може працювати із Podman, що є альтернативою Docker.

## Порівняльна таблиця

| Інструмент       | minikube    | kind        | k3d                        | 
| -----------------|:-----------:| :----------:|:---------------------------:
| Minimum RAM      | 2 GB        |   8 GB      | 512 MB                     |
| Minimum CPU      | 2           |   2         | 1                          |
| Runtime          | VM,container,bare-metal|container| native        |
| OS   | Windows,macOS,Linux | Windows,macOS,Linux | Linux |
| Підтримка multi-cluster | Так | Так | Ні |
| Container Runtime | Docker, CRI-O, containerd, gvisor | Docker | Docker, containerd |
| Підтримка Podman | N | N | Y |
